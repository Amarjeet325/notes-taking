{"ast":null,"code":"import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import{ToastContainer}from'react-toastify';import{handleError,handleSuccess}from'../utils';import'../styles/Login.css';import signupBg from'../assets/signup-bg.png';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[loginInfo,setLoginInfo]=useState({email:'',otp:''});const[showOtp,setShowOtp]=useState(false);const[keepLoggedIn,setKeepLoggedIn]=useState(false);const navigate=useNavigate();const handleChange=e=>{const{name,value}=e.target;setLoginInfo(prev=>({...prev,[name]:value}));};const handleLogin=async e=>{e.preventDefault();const{email,otp}=loginInfo;if(!email||!otp)return handleError('Email and OTP are required');try{const response=await fetch('http://localhost:4000/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(loginInfo)});const result=await response.json();if(result.success){handleSuccess(result.message||'Login successful');localStorage.setItem('token',result.jwtToken);localStorage.setItem('loggedInUser',result.name);if(keepLoggedIn)localStorage.setItem('keepLoggedIn',true);setTimeout(()=>navigate('/home'),1000);}else{var _result$error,_result$error$details,_result$error$details2;handleError((result===null||result===void 0?void 0:(_result$error=result.error)===null||_result$error===void 0?void 0:(_result$error$details=_result$error.details)===null||_result$error$details===void 0?void 0:(_result$error$details2=_result$error$details[0])===null||_result$error$details2===void 0?void 0:_result$error$details2.message)||result.message||'Login failed');}}catch(err){handleError('Network error or server unreachable');console.error(err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:\"\\uD83C\\uDF10 HD\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"Sign In\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"Please login to continue to your account.\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",value:loginInfo.email,onChange:handleChange,className:\"input\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"otp-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:showOtp?\"text\":\"password\",name:\"otp\",placeholder:\"OTP\",value:loginInfo.otp,onChange:handleChange,className:\"input\"}),/*#__PURE__*/_jsx(\"span\",{className:\"toggle-otp\",onClick:()=>setShowOtp(!showOtp),title:showOtp?\"Hide OTP\":\"Show OTP\",children:showOtp?\"üôà\":\"üëÅÔ∏è\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"resend-otp\",children:\"Resend OTP\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"keepLoggedIn\",checked:keepLoggedIn,onChange:e=>setKeepLoggedIn(e.target.checked)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"keepLoggedIn\",children:\"Keep me logged in\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn\",children:\"Sign In\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"switch-text\",children:[\"Need an account?? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Create one\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"image-section\",children:/*#__PURE__*/_jsx(\"img\",{src:signupBg,alt:\"Login Background\"})}),/*#__PURE__*/_jsx(ToastContainer,{position:\"top-center\",autoClose:3000})]});}export default Login;","map":{"version":3,"names":["React","useState","Link","useNavigate","ToastContainer","handleError","handleSuccess","signupBg","jsx","_jsx","jsxs","_jsxs","Login","loginInfo","setLoginInfo","email","otp","showOtp","setShowOtp","keepLoggedIn","setKeepLoggedIn","navigate","handleChange","e","name","value","target","prev","handleLogin","preventDefault","response","fetch","method","headers","body","JSON","stringify","result","json","success","message","localStorage","setItem","jwtToken","setTimeout","_result$error","_result$error$details","_result$error$details2","error","details","err","console","className","children","onSubmit","type","placeholder","onChange","onClick","title","id","checked","htmlFor","to","src","alt","position","autoClose"],"sources":["/home/victus/Desktop/Notes_app/frontend/src/pages/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\nimport { handleError, handleSuccess } from '../utils';\nimport '../styles/Login.css';\nimport signupBg from '../assets/signup-bg.png';\n\nfunction Login() {\n    const [loginInfo, setLoginInfo] = useState({\n        email: '',\n        otp: ''\n    });\n    const [showOtp, setShowOtp] = useState(false);\n    const [keepLoggedIn, setKeepLoggedIn] = useState(false);\n\n    const navigate = useNavigate();\n\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setLoginInfo(prev => ({ ...prev, [name]: value }));\n    };\n\n    const handleLogin = async (e) => {\n        e.preventDefault();\n        const { email, otp } = loginInfo;\n\n        if (!email || !otp) return handleError('Email and OTP are required');\n\n        try {\n            const response = await fetch('http://localhost:4000/auth/login', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(loginInfo)\n            });\n\n            const result = await response.json();\n            if (result.success) {\n                handleSuccess(result.message || 'Login successful');\n                localStorage.setItem('token', result.jwtToken);\n                localStorage.setItem('loggedInUser', result.name);\n                if (keepLoggedIn) localStorage.setItem('keepLoggedIn', true);\n                setTimeout(() => navigate('/home'), 1000);\n            } else {\n                handleError(result?.error?.details?.[0]?.message || result.message || 'Login failed');\n            }\n        } catch (err) {\n            handleError('Network error or server unreachable');\n            console.error(err);\n        }\n    };\n\n    return (\n        <div className=\"auth-wrapper\">\n            <div className=\"form-section\">\n                <div className=\"logo\">üåê HD</div>\n                <h2 className=\"title\">Sign In</h2>\n                <p className=\"subtitle\">Please login to continue to your account.</p>\n\n                <form className=\"form\" onSubmit={handleLogin}>\n                    <input\n                        type=\"email\"\n                        name=\"email\"\n                        placeholder=\"Email\"\n                        value={loginInfo.email}\n                        onChange={handleChange}\n                        className=\"input\"\n                    />\n                    <div className=\"otp-wrapper\">\n                        <input\n                            type={showOtp ? \"text\" : \"password\"}\n                            name=\"otp\"\n                            placeholder=\"OTP\"\n                            value={loginInfo.otp}\n                            onChange={handleChange}\n                            className=\"input\"\n                        />\n                        <span\n                            className=\"toggle-otp\"\n                            onClick={() => setShowOtp(!showOtp)}\n                            title={showOtp ? \"Hide OTP\" : \"Show OTP\"}\n                        >\n                            {showOtp ? \"üôà\" : \"üëÅÔ∏è\"}\n                        </span>\n                    </div>\n\n                    <div className=\"resend-otp\">Resend OTP</div>\n\n                    <div className=\"checkbox-row\">\n                        <input\n                            type=\"checkbox\"\n                            id=\"keepLoggedIn\"\n                            checked={keepLoggedIn}\n                            onChange={(e) => setKeepLoggedIn(e.target.checked)}\n                        />\n                        <label htmlFor=\"keepLoggedIn\">Keep me logged in</label>\n                    </div>\n\n                    <button type=\"submit\" className=\"btn\">Sign In</button>\n\n                    <p className=\"switch-text\">Need an account?? <Link to=\"/signup\">Create one</Link></p>\n                </form>\n            </div>\n\n            <div className=\"image-section\">\n                <img src={signupBg} alt=\"Login Background\" />\n            </div>\n\n            <ToastContainer position=\"top-center\" autoClose={3000} />\n        </div>\n    );\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}